<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarStats – Kostenübersicht</title>
    <link rel="stylesheet" href="Templates/variables.css">
    <link rel="stylesheet" href="Templates/header.css">
    <link rel="stylesheet" href="Templates/footer.css">
    <link rel="stylesheet" href="kosteneingabe.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body>

<div id="header-placeholder"></div>
<script src="../assets/header.js"></script>

<div class="kosteneingabe-gridcontainer">

    <!-- Sidebar for car selection -->
    <aside class="kosteneingabe-sidebar">
        <div class="kosteneingabe-carselect">
            <label for="car-select" class="kosteneingabe-carselect__label">Wählen Sie ein Auto:</label>
            <select id="car-select" class="kosteneingabe-carselect__select">
                <option value="vw-golf-7">VW Golf 7</option>
                <option value="bmw-3er">BMW 3er</option>
                <option value="tesla-model-3">Tesla Model 3</option>
            </select>
        </div>
    </aside>

    <!-- Main content -->
    <main class="kosteneingabe-center">
        <div class="kosteneingabe-expense-filter">
            <span class="kosteneingabe-expense-filter__label">Vergangene Ausgaben:</span>
            <div class="kosteneingabe-expense-filter__slider">
                <button class="kosteneingabe-expense-filter__btn active" data-filter="Sprit">Sprit</button>
                <button class="kosteneingabe-expense-filter__btn" data-filter="Service">Service</button>
                <button class="kosteneingabe-expense-filter__btn" data-filter="Reparatur">Reparatur</button>
                <button class="kosteneingabe-expense-filter__btn" data-filter="Versicherung">Versicherung</button>
                <button class="kosteneingabe-expense-filter__btn" data-filter="Anschaffung">Anschaffung</button>
                <button class="kosteneingabe-expense-filter__btn" data-filter="Zubehör">Zubehör</button>
            </div>
        </div>
        <form class="kosteneingabe-form animate__animated animate__fadeInUp" id="cost-form">
            <h2 class="kosteneingabe-form__title">Neue Kosten eintragen</h2>
            <div id="dynamic-fields-container"></div>
            <div class="kosteneingabe-form__input-row">
                <label for="date" class="kosteneingabe-form__label">Datum</label>
                <input type="date" id="date" name="date" class="kosteneingabe-form__input">
            </div>
            <div class="kosteneingabe-form__input-row">
                <label for="km" class="kosteneingabe-form__label">Kilometerstand</label>
                <input type="number" id="km" name="km" min="0" step="1" class="kosteneingabe-form__input">
            </div>
            <div class="kosteneingabe-form__input-row">
                <label for="amount" class="kosteneingabe-form__label">Betrag (€)</label>
                <input type="number" id="amount" name="amount" min="0" step="0.01" class="kosteneingabe-form__input">
            </div>
            <div class="kosteneingabe-form__input-row">
                <label for="note" class="kosteneingabe-form__label">Kommentar (optional)</label>
                <textarea id="note" name="note" rows="2" class="kosteneingabe-form__input"></textarea>
            </div>
            <button class="kosteneingabe-form__submit" type="submit">Speichern</button>
        </form>
    </main>

    <!-- Rightbar for Quick Overview -->
    <aside class="kosteneingabe-rightbar">
        <div class="kosteneingabe-QuickOverview">
            <h3 class="kosteneingabe-QuickOverview__title">Schnellüberblick</h3>
            <div class="kosteneingabe-QuickOverview__stat-block">
                <div>Monatliche Kosten: <strong>120 €</strong></div>
                <div>Gesamtkosten: <strong>2.340 €</strong></div>
                <div>Verbrauch: <strong>6,2 l/100km</strong></div>
                <div>Jahresbudget: <strong>3.000 €</strong></div>
                <div>46% des Jahresbudgets verbraucht</div>
            </div>
        </div>
    </aside>
</div>

<div id="footer-placeholder"></div>
<script src="../assets/script.js"></script>

<script>
    // Dynamic fields for category (switch/case)
    const expenseBtns = document.querySelectorAll('.kosteneingabe-expense-filter__btn');
    const dynamicFields = document.getElementById('dynamic-fields-container');
    let currentCategory = 'Sprit';

    function updateDynamicFields(category) {
        let html = '';
        switch (category) {
            case 'Sprit':
                html = `
                    <div class="kosteneingabe-form__input-row">
                        <label class="kosteneingabe-form__label" for="fuel-type">Kraftstoffart</label>
                        <select id="fuel-type" name="fuel-type" class="kosteneingabe-form__select">
                            <option>Benzin</option>
                            <option>Diesel</option>
                            <option>LPG</option>
                            <option>Strom</option>
                        </select>
                    </div>
                    <div class="kosteneingabe-form__input-row">
                        <label class="kosteneingabe-form__label" for="fuel-amount">Getankte Menge (Liter/kWh)</label>
                        <input type="number" id="fuel-amount" name="fuel-amount" min="0" step="0.01" class="kosteneingabe-form__input">
                    </div>
                `;
                break;
            case 'Service':
            case 'Reparatur':
                html = `
                    <div class="kosteneingabe-form__input-row">
                        <label class="kosteneingabe-form__label" for="service-type">Art der Leistung</label>
                        <input type="text" id="service-type" name="service-type" class="kosteneingabe-form__input" placeholder="z.B. Ölwechsel, Bremsen">
                    </div>
                `;
                break;
            case 'Versicherung':
                html = `
                    <div class="kosteneingabe-form__input-row">
                        <label class="kosteneingabe-form__label" for="insurance-type">Versicherungsart</label>
                        <input type="text" id="insurance-type" name="insurance-type" class="kosteneingabe-form__input" placeholder="z.B. Haftpflicht, Vollkasko">
                    </div>
                `;
                break;
            case 'Anschaffung':
            case 'Zubehör':
                html = `
                    <div class="kosteneingabe-form__input-row">
                        <label class="kosteneingabe-form__label" for="purchase-desc">Beschreibung</label>
                        <input type="text" id="purchase-desc" name="purchase-desc" class="kosteneingabe-form__input" placeholder="z.B. Dachbox, Navi">
                    </div>
                `;
                break;
            default:
                html = '';
        }
        // Анимация при смене категории
        dynamicFields.innerHTML = html;
        dynamicFields.classList.remove('kosteneingabe-form__fields-animate');
        void dynamicFields.offsetWidth; // trigger reflow
        dynamicFields.classList.add('kosteneingabe-form__fields-animate');
    }

    expenseBtns.forEach(btn => {
        btn.addEventListener('click', function () {
            expenseBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            currentCategory = this.dataset.filter;
            updateDynamicFields(currentCategory);
        });
    });

    // Init
    window.addEventListener('DOMContentLoaded', () => {
        updateDynamicFields(currentCategory);
    });
</script>

</body>
</html>